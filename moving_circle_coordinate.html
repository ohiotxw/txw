<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>可拖动圆心的双圆坐标系</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        canvas {
            border: 2px solid #fff;
            border-radius: 10px;
            background: #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: crosshair;
        }
        
        .info {
            margin-top: 20px;
            color: white;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            min-width: 600px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .info-label {
            font-size: 14px;
            margin-bottom: 5px;
            opacity: 0.8;
        }
        
        .info-value {
            font-size: 18px;
            font-weight: bold;
        }
        
        .instructions {
            margin-top: 15px;
            color: white;
            text-align: center;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 5px;
            backdrop-filter: blur(10px);
            font-size: 14px;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    
    <div class="info">
        <div class="info-item">
            <div class="info-label">圆心坐标</div>
            <div class="info-value" id="centerPos">(0, 0)</div>
        </div>
        <div class="info-item">
            <div class="info-label">红色圆半径</div>
            <div class="info-value" id="redRadius">0</div>
        </div>
        <div class="info-item">
            <div class="info-label">绿色圆半径</div>
            <div class="info-value" id="greenRadius">0</div>
        </div>
    </div>
    
    <div class="instructions">
        拖动圆心来改变t值，观察两个同心圆的大小变化
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const centerPosSpan = document.getElementById('centerPos');
        const redRadiusSpan = document.getElementById('redRadius');
        const greenRadiusSpan = document.getElementById('greenRadius');
        
        // 坐标系参数
        const originX = canvas.width / 2;
        const originY = canvas.height / 2;
        const scale = 50; // 每个单位的像素数
        const axisLength = 300;
        
        // 圆心参数
        let t = 2; // 初始t值
        let isDragging = false;
        
        function drawCoordinateSystem() {
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // 绘制x轴
            ctx.beginPath();
            ctx.moveTo(originX - axisLength, originY);
            ctx.lineTo(originX + axisLength, originY);
            ctx.stroke();
            
            // 绘制y轴
            ctx.beginPath();
            ctx.moveTo(originX, originY - axisLength);
            ctx.lineTo(originX, originY + axisLength);
            ctx.stroke();
            
            // 绘制箭头
            drawArrow(originX + axisLength - 10, originY, 10, 0, '#333');
            drawArrow(originX, originY - axisLength + 10, 0, -10, '#333');
            
            // 绘制刻度
            drawTicks();
            
            // 标记轴标签
            ctx.fillStyle = '#333';
            ctx.font = '16px Arial';
            ctx.fillText('X', originX + axisLength - 20, originY + 20);
            ctx.fillText('Y', originX - 20, originY - axisLength + 30);
            ctx.fillText('O', originX - 20, originY + 20);
        }
        
        function drawArrow(x, y, dx, dy, color) {
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 2;
            
            const arrowSize = 8;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x - arrowSize + dx, y - arrowSize + dy);
            ctx.moveTo(x, y);
            ctx.lineTo(x - arrowSize + dx, y + arrowSize + dy);
            ctx.stroke();
        }
        
        function drawTicks() {
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            
            // x轴刻度
            for (let i = -6; i <= 6; i++) {
                if (i === 0) continue;
                const x = originX + i * scale;
                if (x >= 0 && x <= canvas.width) {
                    ctx.beginPath();
                    ctx.moveTo(x, originY - 5);
                    ctx.lineTo(x, originY + 5);
                    ctx.stroke();
                    ctx.fillText(i.toString(), x - 5, originY + 20);
                }
            }
            
            // y轴刻度
            for (let i = -5; i <= 5; i++) {
                if (i === 0) continue;
                const y = originY - i * scale;
                if (y >= 0 && y <= canvas.height) {
                    ctx.beginPath();
                    ctx.moveTo(originX - 5, y);
                    ctx.lineTo(originX + 5, y);
                    ctx.stroke();
                    ctx.fillText(i.toString(), originX - 20, y + 5);
                }
            }
        }
        
        function drawLineSegmentEF() {
            // E(1,3), F(4,3)
            const Ex = originX + 1 * scale;
            const Ey = originY - 3 * scale;
            const Fx = originX + 4 * scale;
            const Fy = originY - 3 * scale;
            
            ctx.beginPath();
            ctx.moveTo(Ex, Ey);
            ctx.lineTo(Fx, Fy);
            ctx.strokeStyle = '#27ae60';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // 标记点E和F
            ctx.fillStyle = '#27ae60';
            ctx.font = '14px Arial';
            
            // 点E
            ctx.beginPath();
            ctx.arc(Ex, Ey, 4, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('E(1,3)', Ex - 10, Ey - 10);
            
            // 点F
            ctx.beginPath();
            ctx.arc(Fx, Fy, 4, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillText('F(4,3)', Fx + 10, Fy - 10);
        }
        
        function drawCircles() {
            const centerX = originX + t * scale;
            const centerY = originY;
            
            const redRadius = Math.abs(t) * scale;
            const greenRadius = Math.sqrt(2) * Math.abs(t) * scale;
            
            // 绘制绿色实线圆（外圆）
            if (greenRadius > 0) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, greenRadius, 0, Math.PI * 2);
                ctx.strokeStyle = '#27ae60';
                ctx.lineWidth = 2;
                ctx.setLineDash([]);
                ctx.stroke();
            }
            
            // 绘制红色虚线圆（内圆）
            if (redRadius > 0) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, redRadius, 0, Math.PI * 2);
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 2;
                ctx.setLineDash([8, 4]);
                ctx.stroke();
                ctx.setLineDash([]);
            }
            
            // 绘制圆心
            ctx.beginPath();
            ctx.arc(centerX, centerY, 6, 0, Math.PI * 2);
            ctx.fillStyle = '#3498db';
            ctx.fill();
            ctx.strokeStyle = '#2980b9';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // 标记圆心坐标
            ctx.fillStyle = '#3498db';
            ctx.font = '14px Arial';
            const label = `(${t.toFixed(1)}, 0)`;
            const labelWidth = ctx.measureText(label).width;
            ctx.fillText(label, centerX - labelWidth/2, centerY - 15);
            
            // 如果有半径，绘制半径线
            if (redRadius > 0) {
                // 红色圆半径线
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + redRadius, centerY);
                ctx.strokeStyle = '#e74c3c';
                ctx.lineWidth = 1;
                ctx.setLineDash([4, 2]);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // 绿色圆半径线
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX + greenRadius * Math.cos(Math.PI/4), centerY - greenRadius * Math.sin(Math.PI/4));
                ctx.strokeStyle = '#27ae60';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
        }
        
        function draw() {
            // 清空画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 绘制坐标系
            drawCoordinateSystem();
            
            // 绘制线段EF
            drawLineSegmentEF();
            
            // 绘制圆
            drawCircles();
            
            // 更新信息显示
            centerPosSpan.textContent = `(${t.toFixed(1)}, 0)`;
            redRadiusSpan.textContent = `|t| = ${Math.abs(t).toFixed(1)}`;
            greenRadiusSpan.textContent = `√2|t| = ${(Math.sqrt(2) * Math.abs(t)).toFixed(1)}`;
        }
        
        // 鼠标事件处理
        function getMousePos(e) {
            const rect = canvas.getBoundingClientRect();
            return {
                x: e.clientX - rect.left,
                y: e.clientY - rect.top
            };
        }
        
        function isNearCenter(mouseX, mouseY) {
            const centerX = originX + t * scale;
            const centerY = originY;
            const distance = Math.sqrt((mouseX - centerX) ** 2 + (mouseY - centerY) ** 2);
            return distance <= 15; // 15像素的拖动范围
        }
        
        canvas.addEventListener('mousedown', (e) => {
            const pos = getMousePos(e);
            if (isNearCenter(pos.x, pos.y)) {
                isDragging = true;
                canvas.style.cursor = 'grabbing';
            }
        });
        
        canvas.addEventListener('mousemove', (e) => {
            const pos = getMousePos(e);
            
            if (isDragging) {
                // 计算新的t值（基于x坐标）
                t = (pos.x - originX) / scale;
                // 限制t的范围
                t = Math.max(-6, Math.min(6, t));
                draw();
            } else {
                // 检查鼠标是否在圆心附近
                if (isNearCenter(pos.x, pos.y)) {
                    canvas.style.cursor = 'grab';
                } else {
                    canvas.style.cursor = 'crosshair';
                }
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            isDragging = false;
            canvas.style.cursor = 'crosshair';
        });
        
        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
            canvas.style.cursor = 'crosshair';
        });
        
        // 初始绘制
        draw();
    </script>
</body>
</html>